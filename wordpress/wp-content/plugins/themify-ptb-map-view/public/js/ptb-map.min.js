function PTB_MapView(c,e){var b=jQuery;function a(s,r,t){b(s).css({height:r.h,width:r.w+(r.wt=="%"?"%":"")});var j=r.r;if(j=="ROADMAP"){j=google.maps.MapTypeId.ROADMAP}else{if(j=="SATELLITE"){j=google.maps.MapTypeId.SATELLITE}else{if(j=="HYBRID"){j=google.maps.MapTypeId.HYBRID}else{if(j=="TERRAIN"){j=google.maps.MapTypeId.TERRAIN}}}}if($mobile&&r.dm){r.d=false}var l={center:new google.maps.LatLng(-34.397,150.644),mapTypeId:j,scrollwheel:r.s?true:false,draggable:r.d?true:false};var h=new google.maps.Map(s,l),f=new google.maps.LatLngBounds(),m=[],g=r.m.indexOf("http")!==-1,k={minWidth:245,maxWidth:300,arrowSize:15,arrowPosition:50,arrowStyle:0,padding:10,disableAutoPan:false,borderWidth:1,borderRadius:8,borderColor:"#4dc7ec",closeSrc:ptb_map.url+"img/close.png"};for(var o in t){var q=t[o].l;if(q.place){var n=new MarkerWithLabel({map:h,anchorPoint:new google.maps.Point(0,-29),title:t[o].t,icon:g?r.m:(r.m?" ":""),raiseOnDrag:true,labelContent:!g?'<i class="ptb_map_icon fa fa-'+r.m+'"></i>':""});q.place=JSON.parse(q.place);q.place.location.lat=q.place.location[0]?parseFloat(q.place.location[0]):parseFloat(q.place.location.lat);q.place.location.lng=q.place.location[1]?parseFloat(q.place.location[1]):parseFloat(q.place.location.lng);n.setPosition({lat:q.place.location.lat,lng:q.place.location.lng});h.setCenter({lat:q.place.location.lat,lng:q.place.location.lng});n.setVisible(true);f.extend(n.getPosition());m.push(n);var p=new InfoBubble(k);google.maps.event.addListener(n,"click",(function(u,v){return function(){p.setContent(d(t[v].i,t[v].t,t[v].u,t[v].l.info));p.open(h,u);b(p.bubble_).addClass("ptb_map_view_wrapper")}})(n,o))}}if(m.length>0){h.fitBounds(f);new MarkerClusterer(h,m)}}function d(g,i,h,j){var f='<div class="ptb_map_view_info_window">';if(g){f+='<a class="ptb_map_view_post_img" href="'+h+'"><img src="'+g+'" alt="'+i+'" title="'+i+'" /></a>'}f+='<a class="ptb_map_view_post_title" href="'+h+'">'+i+"</a>";if(j){j=j.replace(/(?:\r\n|\r|\n)/ig,"<br />");f+='<div class="ptb_map_view_info">'+j+"</div>"}f+="</div>";return f}PTB.LoadAsync(ptb_map.url+"js/markerwithlabel.js",function(){PTB.LoadAsync(ptb_map.url+"js/infobubble.js",function(){PTB.LoadAsync(ptb_map.url+"js/markerclusterer.js",function(){var f=b(".ptb_map_view");f.each(function(){var h=JSON.parse(window.atob(b(this).data("map"))),g=JSON.parse(window.atob(b(this).data("posts")));a(this,h,g);b(this).data({posts:null,map:null}).removeAttr("data-posts data-map")})},null,ptb_map.ver,function(){return("undefined"!==typeof MarkerClusterer)})},null,ptb_map.ver,function(){return("undefined"!==typeof InfoBubble)})},null,ptb_map.ver,function(){return("undefined"!==typeof MarkerWithLabel)})}(function(b){function a(d,e){var c=document.createElement("script");c.type="text/javascript";if(e){c.onload=e}document.getElementsByTagName("head")[0].appendChild(c);c.defer=true;c.async=true;c.src=d}b(document).ready(function(){if(b(".ptb_map_view").length>0){if(typeof google!=="object"||typeof google.maps!=="object"){a("//maps.googleapis.com/maps/api/js?v=3&signed_in=false&callback=PTB_MapView&language="+ptb_map.lng+"&key="+ptb_map.map_key)}else{PTB_MapView()}}})}(jQuery));