(function(a){a(".ptb-submission-form .ptb_extra_rating span").on("click",function(f){f.preventDefault();var g=a(this).closest(".ptb_extra_rating");var b=g.children("span").get().reverse();var c=b.length-a(this).index();a(b).each(function(e){if(c>e){a(this).addClass("ptb_extra_voted")}});g.addClass("ptb_extra_readonly_rating");var d=g.closest(".ptb_rating");d.find(".ptb-submission-rate-cancel").show();d.find('input[type="hidden"]').val(c)});a(".ptb-submission-form .ptb-submission-rate-cancel").on("click",function(c){c.preventDefault();var b=a(this).closest(".ptb_rating");b.find(".ptb_extra_rating").removeClass("ptb_extra_readonly_rating");b.find('input[type="hidden"]').val("");b.find(".ptb_extra_voted").removeClass("ptb_extra_voted");a(this).hide()})}(jQuery));