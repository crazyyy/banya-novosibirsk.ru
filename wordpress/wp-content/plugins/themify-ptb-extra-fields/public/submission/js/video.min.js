(function(b){function a(c){var e;var d={};if(c.match("http(s)?://(www.)?youtube|youtu.be")){var f=c.match("embed")?c.split(/embed\//)[1].split('"')[0]:c.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0];d.host="youtube";d.url="//img.youtube.com/vi/"+f+"/default.jpg"}else{if(e=c.match(/vimeo.com\/.*?\/?(\d+)/i)){d.host="vimeo";d.url="http://www.vimeo.com/api/v2/video/"+e[1]}}return d.host?d:false}b(document).ready(function(){b(".ptb-submission-form").delegate(".ptb_extra_video_url","focusout",function(){var d=b.trim(b(this).val());var f=b(this).closest("li").find(".ptb-submission-priview");f.next("span").remove();b(this).removeClass("ptb-submission-required-error");if(d){if(f.find("img").data("url")!=d){var e=a(d);if(e){if(e.host=="vimeo"){var g=b(this);b.getJSON(e.url+".json?callback=?",{format:"json"},function(h){if(h){f.hide("blind",300,function(){b(this).html('<img data-url="'+d+'" width="100" height="75" src="'+h[0].thumbnail_small+'" />');b(this).show("blind",300)})}else{f.html("").hide().after('<span class="ptb-submission-file-danger ptb-submission-error-text">'+ptb_submission_video.video_error+"</span>");g.addClass("ptb-submission-required-error")}})}else{f.hide("blind",300,function(){b(this).html('<img data-url="'+d+'" width="120" height="90" src="'+e.url+'" />');b(this).show("blind",300)})}}else{f.html("").hide().after('<span class="ptb-submission-file-danger ptb-submission-error-text">'+ptb_submission_video.video_error+"</span>");b(this).addClass("ptb-submission-required-error")}}}else{f.hide("blind",300,function(){b(this).html("").hide()})}});var c=b(".ptb-submission-form .ptb_extra_video_url");c.each(function(){if(b.trim(b(this).val())){b(this).trigger("focusout")}})})}(jQuery));