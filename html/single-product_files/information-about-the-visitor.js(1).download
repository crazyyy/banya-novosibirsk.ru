/* jshint multistr: true */
!function(t){var a=!1
if("function"==typeof define&&define.amd,1,"object"==typeof exports,1,!a){var e=window.biatvCookies,i=window.biatvCookies=t()
i.noConflict=function(){return window.biatvCookies=e,i}}}(function(){function t(){for(var t=0,a={};t<arguments.length;t++){var e=arguments[t]
for(var i in e)a[i]=e[i]}return a}function a(e){function i(a,r,o){var n
if("undefined"!=typeof document){if(arguments.length>1){if(o=t({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=new Date
s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():""
try{n=JSON.stringify(r),/^[\{\[]/.test(n)&&(r=n)}catch(t){}r=e.write?e.write(r,a):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),a=encodeURIComponent(String(a)),a=a.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),a=a.replace(/[\(\)]/g,escape)
var u=""
for(var c in o)o[c]&&(u+="; "+c,o[c]!==!0&&(u+="="+o[c]))
return document.cookie=a+"="+r+u}a||(n={})
for(var l=document.cookie?document.cookie.split("; "):[],g=/(%[0-9A-Z]{2})+/g,m=0;m<l.length;m++){var D=l[m].split("="),v=D.slice(1).join("=")
'"'===v.charAt(0)&&(v=v.slice(1,-1))
try{var p=D[0].replace(g,decodeURIComponent)
if(v=e.read?e.read(v,p):e(v,p)||v.replace(g,decodeURIComponent),this.json)try{v=JSON.parse(v)}catch(t){}if(a===p){n=v
break}a||(n[p]=v)}catch(t){}}return n}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(a,e){i(a,"",t(e,{expires:-1}))},i.withConverter=a,i}return a(function(){})}),function(t,a,e){if(!a.BinotelInformationAboutTheVisitor){a.BinotelInformationAboutTheVisitor={gaTrackingId:"",debugMode:0,cookieName:"biatv-cookie",errorMessage:""}
var i=[{name:"google",regexp:/^www.google/,query:"q"},{name:"yandex",regexp:/yandex.(ua|ru|kz|by|com|tr)$/,query:"text"},{name:"go.mail.ru",regexp:/^go.mail.ru$/,query:"q"},{name:"bing",regexp:/^www.bing/,query:"q"},{name:"yahoo",regexp:/^search.yahoo/,query:"p"},{name:"ask",regexp:/ask.com$/,query:"q"},{name:"rambler",regexp:/rambler.ru$/,query:"query"},{name:"ukr.net",regexp:/^search.ukr.net$/,query:"search_query"},{name:"ukr.net",regexp:/^search.ukr.net$/,query:"search_query"},{name:"meta.ua",regexp:/^search.meta.ua$/,query:"q"},{name:"i.ua",regexp:/^search.i.ua$/,query:"q"},{name:"all.by",regexp:/^all.by$/,query:"query"},{name:"search.tut.by",regexp:/^search.tut.by$/,query:"query"}],r=a.BinotelInformationAboutTheVisitor
a.BinotelInformationAboutTheVisitorSettings&&(a.BinotelInformationAboutTheVisitorSettings.gaTrackingId&&(r.gaTrackingId=a.BinotelInformationAboutTheVisitorSettings.gaTrackingId),a.BinotelInformationAboutTheVisitorSettings.debugMode&&(r.debugMode=a.BinotelInformationAboutTheVisitorSettings.debugMode)),r.debugMode&&console.log("Binotel information about the visitor in processing.",r)
var o
setTimeout(function(){o=new n,o.init(),r.getVisitorData=o.getVisitorData,r.getGoogleAnalyticsData=o.getGoogleAnalyticsData,r.getGoogleAnalyticsDataViaCallback=o.getGoogleAnalyticsDataViaCallback},50)
var n=function(){var e={helpers:{},cookies:a.biatvCookies.noConflict(),googleAnalytics:{initState:!1,data:{name:"",trackingId:"",clientId:""},listOfCallbacks:[]},timers:{initGoogleAnalyticsData:null}}
return this.init=function(){e.helpers.initVisitorData(),e.helpers.initGoogleAnalyticsData()},this.getVisitorData=function(){return e.helpers.getVisitorData()},this.getGoogleAnalyticsData=function(){return e.helpers.getGoogleAnalyticsData()},this.getGoogleAnalyticsDataViaCallback=function(t){return e.helpers.getGoogleAnalyticsDataViaCallback(t)},e.helpers.initVisitorData=function(){r.debugMode&&console.log("[%s] %s",Date(),"Run self.helpers.initVisitorData")
var o=Math.floor(Date.now()/1e3)
e.visitorData=e.cookies.getJSON(r.cookieName),e.visitorData||(e.visitorData={firstVisitAt:o,visitsCount:0,campaignCount:0}),e.visitorData.utmData&&(e.visitorData.utmDataCurrent=e.visitorData.utmData,delete e.visitorData.utmData),e.visitorData.sessionTimeFirst&&(e.visitorData.firstVisitAt=e.visitorData.sessionTimeFirst,delete e.visitorData.sessionTimeFirst),e.visitorData.visitsCount||(e.visitorData.visitsCount=1),e.visitorData.currentVisitStartedAt||(e.visitorData.currentVisitStartedAt=o),e.visitorData.currentVisitOpenPages||(e.visitorData.currentVisitOpenPages=0),e.visitorData.sessionTimeCurrent&&(e.visitorData.currentVisitUpdatedAt=e.visitorData.sessionTimeCurrent,delete e.visitorData.sessionTimeCurrent),(!e.visitorData.currentVisitUpdatedAt||o-e.visitorData.currentVisitUpdatedAt>14400)&&(e.visitorData.visitsCount++,e.visitorData.currentVisitStartedAt=o,e.visitorData.currentVisitOpenPages=0),e.visitorData.location=a.location.href,e.visitorData.userAgent=a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:"",e.visitorData.language=(a.navigator.languages?a.navigator.languages[0]:a.navigator.language||a.navigator.browserLanguage||a.navigator.userLanguage).toLowerCase(),e.visitorData.encoding=(t.characterSet||t.charset).toLowerCase(),e.visitorData.screenResolution=a.screen.width+"x"+a.screen.height,e.visitorData.currentVisitUpdatedAt=o,e.visitorData.currentVisitOpenPages++
var n=e.helpers.parseQueryString(a.location.search),s=e.helpers.parseReferrer(t.referrer),u=e.helpers.parseQueryString(s.search)
if(n.gclid&&!n.utm_source)e.visitorData.utmDataCurrent={},e.visitorData.utmDataCurrent.utm_source="google",e.visitorData.utmDataCurrent.utm_medium="cpc",e.visitorData.utmDataCurrent.utm_campaign="(not set)",e.visitorData.utmDataCurrent.utm_content="(not set)",e.visitorData.utmDataCurrent.utm_term="(not set)",e.visitorData.utmDataCurrent.beginning_at=o,e.visitorData.campaignTime=o,e.visitorData.campaignCount++
else if(n.utm_source)e.visitorData.utmDataCurrent={},e.visitorData.utmDataCurrent.utm_source=n.utm_source,e.visitorData.utmDataCurrent.utm_medium=n.utm_medium||"(not set)",e.visitorData.utmDataCurrent.utm_campaign=n.utm_campaign||"(not set)",e.visitorData.utmDataCurrent.utm_content=n.utm_content||"(not set)",e.visitorData.utmDataCurrent.utm_term=n.utm_term||"(not set)",e.visitorData.utmDataCurrent.beginning_at=o,e.visitorData.campaignTime=o,e.visitorData.campaignCount++
else if(s.hostname&&s.hostname!==a.location.hostname){e.visitorData.utmDataCurrent=void 0
for(var c=0;c<i.length;c++)if(i[c].regexp.test(s.hostname)){e.visitorData.utmDataCurrent={},e.visitorData.utmDataCurrent.utm_source=i[c].name,e.visitorData.utmDataCurrent.utm_medium="organic",e.visitorData.utmDataCurrent.utm_campaign="(not set)",e.visitorData.utmDataCurrent.utm_content="(not set)",e.visitorData.utmDataCurrent.utm_term="https:"===s.protocol?"(not provided)":u[i[c].query]||"(not set)",e.visitorData.utmDataCurrent.beginning_at=o,e.visitorData.campaignTime=o,e.visitorData.campaignCount++
break}!e.visitorData.utmDataCurrent,e.visitorData.utmDataCurrent||(e.visitorData.utmDataCurrent={},e.visitorData.utmDataCurrent.utm_source=s.hostname,e.visitorData.utmDataCurrent.utm_medium="referral",e.visitorData.utmDataCurrent.utm_campaign="(referral)",e.visitorData.utmDataCurrent.utm_content=s.pathname,e.visitorData.utmDataCurrent.utm_term="(not set)",e.visitorData.utmDataCurrent.beginning_at=o,e.visitorData.campaignTime=o,e.visitorData.campaignCount++)}else e.visitorData.utmDataCurrent||(e.visitorData.utmDataCurrent={},e.visitorData.utmDataCurrent.utm_source="(direct)",e.visitorData.utmDataCurrent.utm_medium="(none)",e.visitorData.utmDataCurrent.utm_campaign="(direct)",e.visitorData.utmDataCurrent.utm_content="(not set)",e.visitorData.utmDataCurrent.utm_term="(not set)",e.visitorData.utmDataCurrent.beginning_at=o,e.visitorData.campaignTime=o,e.visitorData.campaignCount++)
e.visitorData.utmDataFirst||(e.visitorData.utmDataFirst=e.visitorData.utmDataCurrent),"cpc"===e.visitorData.utmDataCurrent.utm_medium&&(e.visitorData.utmDataFirstPaid||(e.visitorData.utmDataFirstPaid=e.visitorData.utmDataCurrent),e.visitorData.utmDataLastPaid=e.visitorData.utmDataCurrent),e.visitorData.geoipData={country:"Ukraine",region:"",city:"",org:"LLC wnet Ukraine"},e.cookies.set(r.cookieName,e.visitorData,{expires:730,domain:r.cookieDomain||""})},e.helpers.initGoogleAnalyticsData=function(t){return clearTimeout(e.timers.initGoogleAnalyticsData),t=t||1,r.debugMode&&console.log("[%s] %s [attempt: %s]",Date(),"Run self.helpers.initGoogleAnalyticsData",t),t>=201?(r.debugMode&&(r.errorMessage="Can't find GA",console.log("[%s] %s",Date(),r.errorMessage)),e.googleAnalytics.initState="failed",e.helpers.sendGoogleAnalyticsDataViaCallback(),!1):void("undefined"==typeof ga||"function"!=typeof ga?e.timers.initGoogleAnalyticsData=setTimeout(function(){e.helpers.initGoogleAnalyticsData(++t)},t<=100?200:1e3):ga(function(){var t=ga.getAll()
if(t.length){var a=0
if(r.gaTrackingId)for(var i=0;i<t.length;i++)if(r.gaTrackingId===t[i].get("trackingId")){a=i
break}e.googleAnalytics.data.name=t[a].get("name"),e.googleAnalytics.data.trackingId=t[a].get("trackingId"),e.googleAnalytics.data.clientId=t[a].get("clientId"),e.googleAnalytics.initState="success"}else e.googleAnalytics.initState="failed"
e.helpers.sendGoogleAnalyticsDataViaCallback(),r.debugMode&&console.log("[%s] %s: %s",Date(),"Completed self.helpers.initGoogleAnalyticsData",e.googleAnalytics.initState,e.googleAnalytics.data)}))},e.helpers.getVisitorData=function(){return e.visitorData},e.helpers.getGoogleAnalyticsData=function(){return e.googleAnalytics.data},e.helpers.getGoogleAnalyticsDataViaCallback=function(t){"failed"===e.googleAnalytics.initState?t(e.helpers.getGoogleAnalyticsData()):"success"===e.googleAnalytics.initState?t(e.helpers.getGoogleAnalyticsData()):e.googleAnalytics.listOfCallbacks.push(t)},e.helpers.sendGoogleAnalyticsDataViaCallback=function(){for(var t=0;t<e.googleAnalytics.listOfCallbacks.length;t++)"function"==typeof e.googleAnalytics.listOfCallbacks[t]&&e.googleAnalytics.listOfCallbacks[t](e.helpers.getGoogleAnalyticsData())
e.googleAnalytics.listOfCallbacks=[]},e.helpers.parseQueryString=function(t){for(var a,e=/[?&]([^=#&]+)=([^&#]*)/g,i={};a=e.exec(t);)try{i[decodeURIComponent(a[1])]=decodeURIComponent(a[2])}catch(t){}return i},e.helpers.parseReferrer=function(t){var a={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:""}
if(""!==t){var e=document.createElement("a")
e.href=t,a.hash=e.hash,a.host=e.host,a.hostname=e.hostname,a.href=e.href,a.origin=e.origin,a.pathname=e.pathname,a.port=e.port,a.protocol=e.protocol,a.search=e.search}return a},this}
Date.now||(Date.now=function(){return(new Date).getTime()})}}(document,window,"script")
